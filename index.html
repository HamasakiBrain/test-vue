<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <title>Title</title>
</head>
<body>

<div id="app" class="container-fluid py-4 ">
       <div class="row">
           <div class="col-lg-3 col-md-4">
               <div>
                   <label for="">Добавьте банки</label>
                  <div class="form-group">
                      <input type="text" placeholder="Номер банки" v-model="jarAdd.id" class="form-control my-2">
                  </div>
                   <div class="form-group">
                       <input type="text" placeholder="Объем банки" v-model="jarAdd.volume" class="form-control my-2">
                   </div>
                   <button class="btn btn-success" @click="addEmptyJars()">Добавить банку</button>
               </div>

               <div v-if="emptyJar.length">
                   Пустые банки:
               </div>
               <div v-for="jar in emptyJar" v-if="emptyJar.length">
                   <jar :id="jar.id"  :volume="jar.volume"></jar>
               </div>
           </div>
           <div class="col-lg-4">
               <label>Какое варенье сварили?)</label>
             <div class="form-group">
                 <select v-model="cooked.jam" class="form-control">
                     <option  v-for="item in jams" :value="item">{{ item }}</option>
                 </select>
             </div>
               <div class="form-group">
                   какой объем сварили?
                   <input type="number" class="form-control" v-model="cooked.volume">
               </div>
              <div class="form-group">
                  <label>Выберите куда залить</label>
                  <select v-model="cooked.jar" class="form-control">
                      <option :value="item.id" v-for="item in emptyJar" v-if="item.volume >= cooked.volume" >{{ item.id }} объемом {{ item.volume }}</option>
                      <option :value="item.id" v-for="item in jars" v-if="item.volume_left >= cooked.volume && item.jam == cooked.jam" >{{ item.id }} объемом {{ item.volume_left }}</option>
                  </select>
              </div>
               <button class="btn btn-success" @click="addJars(cooked.jar)">Залить варенье</button>
           </div>
           <div class="col-lg-4">
               <label>Ваши банки</label>
               <jar :id="item.id" :volume="item.volume" :jam="item.jam" :volume_left="item.volume_left" v-for="item in jars"></jar>
           </div>
       </div>

    </div>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script>
    Vue.component("jar", {
        props: ["id", "volume", "jam", "volume_left"],
        template: `
            <div>
              Банка {{ id }} с объемом {{ volume }} грамм {{ jam ? jam + " варенье " : "" }} свободно еще {{ volume_left }} .
            </div>
        `,
    })

    new Vue({
        el: "#app",
        data(){
            return {
                emptyJar: [],
                jarAdd: {},
                jams: ["Вишневое", "абрикосовое", "клубничное"],
                cooked: {},
                jars: []
            }
        },
        methods: {
            addEmptyJars(){
                if(this.jarAdd.id && this.jarAdd.volume){
                    this.emptyJar.push(this.jarAdd);
                    this.jarAdd = {};
                }
            },
            addJars(id){
                let item = this.emptyJar.findIndex(
                            x => x.id === id
                )
              let Jar = {
                  id: this.cooked.jar,
                  jam: this.cooked.jam,
                  volume: this.cooked.volume,
                  volume_left: (parseInt(this.emptyJar[item].volume) - parseInt(this.cooked.volume))
              }
              this.jars.push(Jar);
              this.emptyJar.splice(item, 1);
            }
        }
    });
</script>
</body>
</html>
